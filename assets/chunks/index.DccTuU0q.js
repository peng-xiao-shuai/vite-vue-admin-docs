import{az as ee,ar as _,aB as E,F as He,aR as $e,av as ce,au as Ye,v as Ae,s as Ke,Y as Ie,ay as Ue,h as b,q as de,aq as Pe,ax as se,P,d as Oe,G as T,r as fe,ak as Xe,p as R,a0 as We,al as Ee,at as pe,am as je,B as D,o as m,b as h,w as y,a2 as ae,j as g,n as c,N as Ce,Z,c as le,H as J,e as V,t as U,X as Q,a as re,a3 as ie,T as Ge,as as qe,aC as Ne}from"./framework.CklS7oNF.js";import{N as Ze,L as Je,C as Qe,a1 as he,a2 as Fe,a3 as _e,E as xe,a4 as en,D as be}from"./index.BcYfjOIN.js";import{x as z,ac as Re,ae as ve,k as we,h as De,ad as Te,af as nn,ag as on,C as tn,d as sn,e as Se,_ as an,G as ln,ah as rn,ai as un,aj as Be,B as cn,a7 as Me}from"./index.BohtUIiO.js";import{l as ke}from"./theme.sQYGsoaR.js";function dn(e,n,o,t){const s=o-n;return e/=t/2,e<1?s/2*e*e*e+n:s/2*((e-=2)*e*e+2)+n}const fn=(e,n)=>{if(!z)return!1;const o={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(n)],t=Re(e,o);return["scroll","auto","overlay"].some(s=>t.includes(s))},$n=(e,n)=>{if(!z)return;let o=e;for(;o;){if([window,document,document.documentElement].includes(o))return window;if(fn(o,n))return o;o=o.parentNode}return o};let F;const mn=e=>{var n;if(!z)return 0;if(F!==void 0)return F;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const t=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const l=s.offsetWidth;return(n=o.parentNode)==null||n.removeChild(o),F=t-l,F};function Yn(e,n){if(!z)return;if(!n){e.scrollTop=0;return}const o=[];let t=n.offsetParent;for(;t!==null&&e!==t&&e.contains(t);)o.push(t),t=t.offsetParent;const s=n.offsetTop+o.reduce((d,a)=>d+a.offsetTop,0),l=s+n.offsetHeight,r=e.scrollTop,i=r+e.clientHeight;s<r?e.scrollTop=s:l>i&&(e.scrollTop=l-e.clientHeight)}function Kn(e,n,o,t,s){const l=Date.now();let r;const i=()=>{const a=Date.now()-l,p=dn(a>t?t:a,n,o,t);ve(e)?e.scrollTo(window.pageXOffset,p):e.scrollTop=p,a<t?r=Ze(i):ee(s)&&s()};return i(),()=>{r&&Je(r)}}const Un=(e,n)=>ve(n)?e.ownerDocument.documentElement:n,Pn=e=>ve(e)?window.scrollY:e.scrollTop;var x=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(x||{});function pn(e){return E(e)&&e.type===He}function vn(e){return E(e)&&e.type===$e}function Xn(e){return E(e)&&!pn(e)&&!vn(e)}const Wn=e=>{if(!E(e))return{};const n=e.props||{},o=(E(e.type)?e.type.props:void 0)||{},t={};return Object.keys(o).forEach(s=>{ce(o[s],"default")&&(t[s]=o[s].default)}),Object.keys(n).forEach(s=>{t[Ye(s)]=n[s]}),t},jn=e=>{if(!_(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},ue=e=>{const n=_(e)?e:[e],o=[];return n.forEach(t=>{var s;_(t)?o.push(...ue(t)):E(t)&&((s=t.component)!=null&&s.subTree)?o.push(t,...ue(t.component.subTree)):E(t)&&_(t.children)?o.push(...ue(t.children)):o.push(t)}),o},yn=(e,n,o,t)=>{let s={offsetX:0,offsetY:0};const l=a=>{const p=a.clientX,$=a.clientY,{offsetX:f,offsetY:Y}=s,A=e.value.getBoundingClientRect(),v=A.left,K=A.top,S=A.width,I=A.height,W=document.documentElement.clientWidth,ne=document.documentElement.clientHeight,oe=-v+f,te=-K+Y,B=W-v-S+f,j=ne-K-I+Y,G=M=>{let k=f+M.clientX-p,O=Y+M.clientY-$;t!=null&&t.value||(k=Math.min(Math.max(k,oe),B),O=Math.min(Math.max(O,te),j)),s={offsetX:k,offsetY:O},e.value&&(e.value.style.transform=`translate(${we(k)}, ${we(O)})`)},q=()=>{document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",q)};document.addEventListener("mousemove",G),document.addEventListener("mouseup",q)},r=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",l)},i=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",l)},d=()=>{s={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return Ae(()=>{Ke(()=>{o.value?r():i()})}),Ie(()=>{i()}),{resetPosition:d}},gn=(e,n={})=>{Ue(e)||Qe("[useLockscreen]","You need to pass a ref param to this function");const o=n.ns||De("popup"),t=b(()=>o.bm("parent","hidden"));if(!z||Te(document.body,t.value))return;let s=0,l=!1,r="0";const i=()=>{setTimeout(()=>{typeof document>"u"||(on(document==null?void 0:document.body,t.value),l&&document&&(document.body.style.width=r))},200)};de(e,d=>{if(!d){i();return}l=!Te(document.body,t.value),l&&(r=document.body.style.width),s=mn(o.namespace.value);const a=document.documentElement.clientHeight<document.body.scrollHeight,p=Re(document.body,"overflowY");s>0&&(a||p==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),nn(document.body,t.value)}),Pe(()=>i())},Ve=e=>{if(!e)return{onClick:se,onMousedown:se,onMouseup:se};let n=!1,o=!1;return{onClick:r=>{n&&o&&e(r),n=o=!1},onMousedown:r=>{n=r.target===r.currentTarget},onMouseup:r=>{o=r.target===r.currentTarget}}},me="_trap-focus-children",L=[],Le=e=>{if(L.length===0)return;const n=L[L.length-1][me];if(n.length>0&&e.code===tn.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const o=e.shiftKey,t=e.target===n[0],s=e.target===n[n.length-1];t&&o&&(e.preventDefault(),n[n.length-1].focus()),s&&!o&&(e.preventDefault(),n[0].focus())}},En={beforeMount(e){e[me]=he(e),L.push(e),L.length<=1&&document.addEventListener("keydown",Le)},updated(e){P(()=>{e[me]=he(e)})},unmounted(){L.shift(),L.length===0&&document.removeEventListener("keydown",Le)}},Cn=sn({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Se([String,Array,Object])},zIndex:{type:Se([String,Number])}}),hn={click:e=>e instanceof MouseEvent},bn="overlay";var wn=Oe({name:"ElOverlay",props:Cn,emits:hn,setup(e,{slots:n,emit:o}){const t=De(bn),s=d=>{o("click",d)},{onClick:l,onMousedown:r,onMouseup:i}=Ve(e.customMaskEvent?void 0:s);return()=>e.mask?T("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:r,onMouseup:i},[fe(n,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):Xe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[fe(n,"default")])}});const Tn=wn,Sn=Oe({name:"ElMessageBox",directives:{TrapFocus:En},components:{ElButton:Fe,ElFocusTrap:_e,ElInput:xe,ElOverlay:Tn,ElIcon:ln,...rn},inheritAttrs:!1,props:{buttonSize:{type:String,validator:en},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:o,zIndex:t,ns:s,size:l}=un("message-box",b(()=>e.buttonSize)),{t:r}=o,{nextZIndex:i}=t,d=R(!1),a=We({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Ee(ke),cancelButtonLoadingIcon:Ee(ke),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:i()}),p=b(()=>{const u=a.type;return{[s.bm("icon",u)]:u&&Be[u]}}),$=be(),f=be(),Y=b(()=>a.icon||Be[a.type]||""),A=b(()=>!!a.message),v=R(),K=R(),S=R(),I=R(),W=R(),ne=b(()=>a.confirmButtonClass);de(()=>a.inputValue,async u=>{await P(),e.boxType==="prompt"&&u!==null&&k()},{immediate:!0}),de(()=>d.value,u=>{var C,N;u&&(e.boxType!=="prompt"&&(a.autofocus?S.value=(N=(C=W.value)==null?void 0:C.$el)!=null?N:v.value:S.value=v.value),a.zIndex=i()),e.boxType==="prompt"&&(u?P().then(()=>{var ge;I.value&&I.value.$el&&(a.autofocus?S.value=(ge=O())!=null?ge:v.value:S.value=v.value)}):(a.editorErrorMessage="",a.validateError=!1))});const oe=b(()=>e.draggable),te=b(()=>e.overflow);yn(v,K,oe,te),Ae(async()=>{await P(),e.closeOnHashChange&&window.addEventListener("hashchange",B)}),Ie(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",B)});function B(){d.value&&(d.value=!1,P(()=>{a.action&&n("action",a.action)}))}const j=()=>{e.closeOnClickModal&&M(a.distinguishCancelAndClose?"close":"cancel")},G=Ve(j),q=u=>{if(a.inputType!=="textarea")return u.preventDefault(),M("confirm")},M=u=>{var C;e.boxType==="prompt"&&u==="confirm"&&!k()||(a.action=u,a.beforeClose?(C=a.beforeClose)==null||C.call(a,u,a,B):B())},k=()=>{if(e.boxType==="prompt"){const u=a.inputPattern;if(u&&!u.test(a.inputValue||""))return a.editorErrorMessage=a.inputErrorMessage||r("el.messagebox.error"),a.validateError=!0,!1;const C=a.inputValidator;if(ee(C)){const N=C(a.inputValue);if(N===!1)return a.editorErrorMessage=a.inputErrorMessage||r("el.messagebox.error"),a.validateError=!0,!1;if(pe(N))return a.editorErrorMessage=N,a.validateError=!0,!1}}return a.editorErrorMessage="",a.validateError=!1,!0},O=()=>{const u=I.value.$refs;return u.input||u.textarea},ye=()=>{M("close")},ze=()=>{e.closeOnPressEscape&&ye()};return e.lockScroll&&gn(d),{...je(a),ns:s,overlayEvent:G,visible:d,hasMessage:A,typeClass:p,contentId:$,inputId:f,btnSize:l,iconComponent:Y,confirmButtonClasses:ne,rootRef:v,focusStartRef:S,headerRef:K,inputRef:I,confirmRef:W,doClose:B,handleClose:ye,onCloseRequested:ze,handleWrapperClick:j,handleInputEnter:q,handleAction:M,t:r}}});function Bn(e,n,o,t,s,l){const r=D("el-icon"),i=D("close"),d=D("el-input"),a=D("el-button"),p=D("el-focus-trap"),$=D("el-overlay");return m(),h(Ge,{name:"fade-in-linear",onAfterLeave:f=>e.$emit("vanish"),persisted:""},{default:y(()=>[ae(T($,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:y(()=>[g("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:c(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[T(p,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:y(()=>[g("div",{ref:"rootRef",class:c([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:Ce(e.customStyle),tabindex:"-1",onClick:Z(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(m(),le("div",{key:0,ref:"headerRef",class:c([e.ns.e("header"),{"show-close":e.showClose}])},[g("div",{class:c(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),h(r,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:y(()=>[(m(),h(J(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),g("span",null,U(e.title),1)],2),e.showClose?(m(),le("button",{key:0,type:"button",class:c(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:Q(Z(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[T(r,{class:c(e.ns.e("close"))},{default:y(()=>[T(i)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):V("v-if",!0)],2)):V("v-if",!0),g("div",{id:e.contentId,class:c(e.ns.e("content"))},[g("div",{class:c(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),h(r,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:y(()=>[(m(),h(J(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),e.hasMessage?(m(),le("div",{key:1,class:c(e.ns.e("message"))},[fe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),h(J(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),h(J(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:y(()=>[re(U(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):V("v-if",!0)],2),ae(g("div",{class:c(e.ns.e("input"))},[T(d,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":f=>e.inputValue=f,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:c({invalid:e.validateError}),onKeydown:Q(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),g("div",{class:c(e.ns.e("errormsg")),style:Ce({visibility:e.editorErrorMessage?"visible":"hidden"})},U(e.editorErrorMessage),7)],2),[[ie,e.showInput]])],10,["id"]),g("div",{class:c(e.ns.e("btns"))},[e.showCancelButton?(m(),h(a,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:c([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:f=>e.handleAction("cancel"),onKeydown:Q(Z(f=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:y(()=>[re(U(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):V("v-if",!0),ae(T(a,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:c([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:f=>e.handleAction("confirm"),onKeydown:Q(Z(f=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:y(()=>[re(U(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[ie,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[ie,e.visible]])]),_:3},8,["onAfterLeave"])}var Mn=an(Sn,[["render",Bn],["__file","index.vue"]]);const X=new Map,kn=e=>{let n=document.body;return e.appendTo&&(pe(e.appendTo)&&(n=document.querySelector(e.appendTo)),Me(e.appendTo)&&(n=e.appendTo),Me(n)||(n=document.body)),n},Ln=(e,n,o=null)=>{const t=T(Mn,e,ee(e.message)||E(e.message)?{default:ee(e.message)?e.message:()=>e.message}:null);return t.appContext=o,Ne(t,n),kn(e).appendChild(n.firstElementChild),t.component},An=()=>document.createElement("div"),In=(e,n)=>{const o=An();e.onVanish=()=>{Ne(null,o),X.delete(s)},e.onAction=l=>{const r=X.get(s);let i;e.showInput?i={value:s.inputValue,action:l}:i=l,e.callback?e.callback(i,t.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(i)};const t=Ln(e,o,n),s=t.proxy;for(const l in e)ce(e,l)&&!ce(s.$props,l)&&(s[l]=e[l]);return s.visible=!0,s};function H(e,n=null){if(!z)return Promise.reject();let o;return pe(e)||E(e)?e={message:e}:o=e.callback,new Promise((t,s)=>{const l=In(e,n??H._context);X.set(l,{options:e,callback:o,resolve:t,reject:s})})}const On=["alert","confirm","prompt"],Nn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};On.forEach(e=>{H[e]=Rn(e)});function Rn(e){return(n,o,t,s)=>{let l="";return qe(o)?(t=o,l=""):cn(o)?l="":l=o,H(Object.assign({title:l,message:n,type:"",...Nn[e]},t,{boxType:e}),s)}}H.close=()=>{X.forEach((e,n)=>{n.doClose()}),X.clear()};H._context=null;const w=H;w.install=e=>{w._context=e._context,e.config.globalProperties.$msgbox=w,e.config.globalProperties.$messageBox=w,e.config.globalProperties.$alert=w.alert,e.config.globalProperties.$confirm=w.confirm,e.config.globalProperties.$prompt=w.prompt};const Gn=w;export{Gn as E,x as P,En as T,Wn as a,gn as b,Tn as c,Ve as d,mn as e,ue as f,$n as g,Xn as h,pn as i,jn as j,Un as k,Kn as l,Pn as m,Cn as n,hn as o,Yn as s,yn as u};
